<!DOCTYPE html>
<html lang="zh-CN">

<head>
        <link rel="canonical" href="https://freewinxray.github.io/news/article-31142.htm" />
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>PCIe Tandem PROM 方法</title>
        <meta name="description" content="什么是Tandem PROM？ 简单总结：市面多数的FPGA都是SRAM型，需要在上电时从外部存储器件完成代码的加载，对于具有PCIe功能的SRAM FPGA而言，必须要能够在规定的100ms(PCI" />
        <link rel="icon" href="/assets/website/img/freewinxray/favicon.ico" type="image/x-icon"/>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Roboto:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
    <!-- Vendor CSS Files -->
    <link href="__ADDON__/js/frontend/freewinxray/aos/aos.css" rel="stylesheet">
    <link href="__ADDON__/js/frontend/freewinxray/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="__ADDON__/js/frontend/freewinxray/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="__ADDON__/js/frontend/freewinxray/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="__ADDON__/js/frontend/freewinxray/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="__ADDON__/js/frontend/freewinxray/swiper/swiper-bundle.min.css" rel="stylesheet">
    <!-- Template Main CSS File -->
    <link href="/assets/website/css/freewinxray/style.css" rel="stylesheet">
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-F73D4FMVSX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-F73D4FMVSX');
</script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3332997411212854"
     crossorigin="anonymous"></script>
</head>

<body data-page="detail">
        <!-- ======= Header ======= -->
    <header id="header" class="d-flex align-items-center">
        <div class="container d-flex align-items-center justify-content-between">
                        <a href="/" class="logo">Free WinXray</a>
                        <nav id="navbar" class="navbar">
                <ul>
                                        <li><a class="nav-link" href="/">首页</a></li>
                                        <li><a class="nav-link" href="/free-nodes/">免费节点</a></li>
                                        <li><a class="nav-link" href="/paid-subscribe/">推荐机场</a></li>
                                        <li><a class="nav-link" href="/news/">新闻资讯</a></li>
                                        <li><a class="nav-link" href="#">关于</a></li>
                    <li><a class="nav-link" href="#">联系</a></li>
                </ul>
                <i class="bi bi-list mobile-nav-toggle"></i>
            </nav><!-- .navbar -->
        </div>
    </header><!-- End Header -->
    <main id="main" data-aos="fade-up">
        <!-- ======= Breadcrumbs ======= -->
        <section class="breadcrumbs">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center">
                    <h1>PCIe Tandem PROM 方法</h1>
                    <ol>
                        <li><a href="/">首页</a></li>
                        <li><a href="/news/">新闻资讯</a></li>
                        <li>正文</li>
                    </ol>
                </div>
            </div>
        </section><!-- End Breadcrumbs -->
        <section class="inner-page">
            <div class="container">
                <div class="row">
                    <div class="col-md-9 xcblog-blog-list">
                                        <input type="hidden" id="share-website-info" data-name="" data-url="">
                  				  				  				</h1> <h2 id="什么是tandem-prom">什么是Tandem PROM？</h2> <p>简单总结：市面多数的FPGA都是SRAM型，需要在上电时从外部存储器件完成代码的加载，对于具有PCIe功能的SRAM FPGA而言，必须要能够在规定的100ms(PCIe Spec规定，实际上多数计算机要求不会这么严格)时间内完成固件的加载，此时计算机才能够正确的枚举PCIe设备并分配对应的地址。100ms的时间对SPI FLASH而言是个很大的挑战，尤其是在FPGA SIZE越来越大时，为了解决这个问题，Xilinx为自己家的FPGA设备提出了Tandem Configuration的概念，核心思想是将FPGA固件分成2个部分，第一部分是PCIe部分，只负责PCIe的正常枚举，第二部分为用户逻辑。显然，这个技术需要FPGA厂商的支持，因此本文的Tandem专指Xilinx。</p> <p>		"PCI Express is a plug-and-play protocol meaning that at power up, the PCIe Host will enumerate the system. This process consists of the host reading the requested address size from each device and then assigning a base address to the device. As such, PCIe interfaces must be ready when the host queries them or they will not get assigned a base address. The PCI Express specification states that PERST# must deassert 100 ms after the power good of the systems has occurred, and a PCI Express port must be ready to link train no more than 20 ms after PERST# has deasserted. This is commonly referred to as the 100 ms boot time requirement. "</p> <h2 id="tandem-有几种方式">Tandem 有几种方式？</h2> <p>实际使用中，Tandem PROM最为简单，Tandem PCIe由于允许通过PCIe进行重配置，因此在服务器领域最为常用(在其它需要经常更新固件的场景下也适用)。本文只介绍Tandem PROM方式。</p> <p>Tandem Configuration utilizes a two-stage methodology that enables the IP to meet the configuration time requirements indicated in the PCI Express specification. Multiple use cases are supported with this technology:</p> <ul> <li>Tandem PROM: Load the single two-stage bitstream from the flash.</li> <li>Tandem PCIe: Load the first stage bitstream from flash, and deliver the second stage bitstream over the PCIe link to the MCAP.</li> <li>Tandem with Field Updates: After a Tandem PROM or Tandem PCIe initial configuration, update the entire user design while the PCIe link remains active. The update region (floorplan) and design structure are predefined, and Tcl scripts are provided.</li> <li>Tandem + Partial Reconfiguration: This is a more general case of Tandem Configuration followed by Partial Reconfiguration (PR) of any size or number of PR regions.</li> <li>Partial Reconfiguration over PCIe: This is a standard configuration followed by PR, using the PCIe / MCAP as the delivery path of partial bitstreams.</li> </ul> <h2 id="如何实现tandem-prom">如何实现Tandem PROM？</h2> <p>本文介绍使用XDMA实现：</p> <ul> <li>在xdma配置时选择advance mode，并选择Tandem模式；</li> </ul> <p><img decoding="async" src="http://img.555519.xyz/uploads3/20220510/64219e6a49733163d534e2894ddbfebd.jpg" alt="PCIe Tandem PROM 方法"></p> <ul> <li> <p>然后右键选择生成example_design，根据打开的example_design配置，合理约束多出来的管脚，比如startup等interface;</p> </li> <li> <p>根据example的约束进行修改、适配，下面给出SPI配置的示例；</p> <p>--# --------------constraints-------------------- #<br /> set_property BITSTREAM.GENERAL.COMPRESS TRUE [current_design]<br /> set_property BITSTREAM.CONFIG.CONFIGFALLBACK Enable    [current_design]<br /> --#Expecting type 'enum' with possible values of '3,6,9,12,22,33,40,50,57,69,82,87,90,110,115,130,148'.<br /> set_property BITSTREAM.CONFIG.CONFIGRATE 90 [current_design]<br /> set_property CONFIG_VOLTAGE 3.3 [current_design]<br /> set_property CONFIG_MODE SPIx4 [current_design]<br /> set_property CFGBVS VCCO [current_design]<br /> set_property BITSTREAM.CONFIG.SPI_BUSWIDTH 4 [current_design]<br /> set_property BITSTREAM.CONFIG.UNUSEDPIN Pulldown [current_design]</p> <p>set_property HD.TANDEM_IP_PBLOCK Stage1_Config_IO [get_cells sys_rst_n_IBUF_inst]</p> <p>set_property HD.TANDEM_IP_PBLOCK Stage1_Main [get_cells test_i/util_ds_buf]</p> </li> </ul> <h2 id="需要注意的地方有哪些">需要注意的地方有哪些？</h2> <ul> <li>Tandem技术只在Xilinx较新的器件中支持</li> </ul> <p><img decoding="async" src="http://img.555519.xyz/uploads3/20220510/df7799ffb19a653d52dd97b3fb3c6b11.jpg" alt="PCIe Tandem PROM 方法"></p> <ul> <li> <p>mcap_design_switch 这个信号非常有用，可以用作用户第二阶段逻辑的全局复位信号；</p> </li> <li> <p>关于sys_reset复位信号</p> <p>sys_reset 复位信号最好布局到BANK65，且用户自定义IO最好不要放置在BANK65，否则在约束时会引入很多的麻烦；</p> </li> </ul> 			                <div class="clearfix"></div>
                <div class="col-md-12 mt-5">
                                        <p>上一个：<a href="/news/article-30686.htm">动物疫苗接种时间表图片高清大全 动物疫苗接种时间表图片高清大全集</a></p>
                                        <p>下一个：<a href="/news/article-31143.htm">北京看动物捕食地点（北京有动物喂养的公园）</a></p>
                                    </div>
                                    </div>
                    <div class="col-md-3">
                        <div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">热门文章</h3>
    </div>
    <div class="panel-body">
        <ul class="p-0 x-0" style="list-style: none;margin: 0;padding: 0;">
                        <li class="py-2"><a href="/free-nodes/2024-10-30-free-winxray-node.htm" title="「10月30日」最高速度19.9M/S，2024年WinXray每天更新免费节点订阅链接">「10月30日」最高速度19.9M/S，2024年WinXray每天更新免费节点订阅链接</a></li>
                        <li class="py-2"><a href="/free-nodes/2024-11-24-free-node-subscribe-links.htm" title="「11月24日」最高速度22.6M/S，2024年WinXray每天更新免费节点订阅链接">「11月24日」最高速度22.6M/S，2024年WinXray每天更新免费节点订阅链接</a></li>
                        <li class="py-2"><a href="/news/article-20936.htm" title="C语言数据结构之算法的时间复杂度_C 语言">C语言数据结构之算法的时间复杂度_C 语言</a></li>
                        <li class="py-2"><a href="/news/article-25546.htm" title="动物医院办理条件有哪些内容呢英文（动物医院办理条件有哪些内容呢英文版）">动物医院办理条件有哪些内容呢英文（动物医院办理条件有哪些内容呢英文版）</a></li>
                        <li class="py-2"><a href="/free-nodes/2024-8-16-winxray-github.htm" title="「8月16日」最高速度19.1M/S，2024年WinXray每天更新免费节点订阅链接">「8月16日」最高速度19.1M/S，2024年WinXray每天更新免费节点订阅链接</a></li>
                        <li class="py-2"><a href="/free-nodes/2024-12-16-winxray-node-github.htm" title="「12月16日」最高速度19.4M/S，2024年WinXray每天更新免费节点订阅链接">「12月16日」最高速度19.4M/S，2024年WinXray每天更新免费节点订阅链接</a></li>
                        <li class="py-2"><a href="/news/article-31651.htm" title="宠物用品批发进货渠道宠物用品优选倔强的尾巴（宠物用品批发商）">宠物用品批发进货渠道宠物用品优选倔强的尾巴（宠物用品批发商）</a></li>
                        <li class="py-2"><a href="/free-nodes/2024-12-7-node-share.htm" title="「12月7日」最高速度21.5M/S，2024年WinXray每天更新免费节点订阅链接">「12月7日」最高速度21.5M/S，2024年WinXray每天更新免费节点订阅链接</a></li>
                        <li class="py-2"><a href="/free-nodes/2024-11-29-winxray-github.htm" title="「11月29日」最高速度18.4M/S，2024年WinXray每天更新免费节点订阅链接">「11月29日」最高速度18.4M/S，2024年WinXray每天更新免费节点订阅链接</a></li>
                        <li class="py-2"><a href="/news/article-26936.htm" title="合肥宠物救助站电话（合肥宠物救助领养中心）">合肥宠物救助站电话（合肥宠物救助领养中心）</a></li>
                    </ul>
    </div>
</div>

<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">归纳</h3>
    </div>
    <div class="panel-body">
        <ul class="p-0 x-0" style="list-style: none;margin: 0;padding: 0;">
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">84</span> <a href="/date/2024-12/" title="2024-12 归档">2024-12</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">34</span> <a href="/date/2024-11/" title="2024-11 归档">2024-11</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">31</span> <a href="/date/2024-10/" title="2024-10 归档">2024-10</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">30</span> <a href="/date/2024-09/" title="2024-09 归档">2024-09</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">31</span> <a href="/date/2024-08/" title="2024-08 归档">2024-08</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">3</span> <a href="/date/2024-07/" title="2024-07 归档">2024-07</a></h4>
            </li>
                    </ul>
    </div>
</div>

                    </div>
                </div>
            </div>
        </section>
    </main><!-- End #main -->
        <!-- ======= Footer ======= -->
    <footer id="footer">
        <div class="container py-4">
            <div class="copyright">
                            <p>
                                <a href="/">首页</a> | 
                                <a href="/free-node/">免费节点</a> | 
                                <a href="/news/">新闻资讯</a> |
                                <a href="/about-us.htm">关于我们</a> |
                                <a href="/disclaimer.htm">免责申明</a> |
                                <a href="/privacy.htm">隐私申明</a> |
                                <a href="/sitemap.xml">网站地图</a>
                            </p>
                Free WinXray节点订阅站 版权所有 Powered by WordPress
            </div>
        </div>
    </footer><!-- End Footer -->
    <div id="preloader"></div>
    <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
    <!-- Vendor JS Files -->
    <script src="/assets/website/js/frontend/freewinxray/jquery-3.5.1.min.js"></script>
    <script src="/assets/website/js/frontend/freewinxray/aos/aos.js"></script>
    <script src="/assets/website/js/frontend/freewinxray/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/assets/website/js/frontend/freewinxray/glightbox/js/glightbox.min.js"></script>
    <script src="/assets/website/js/frontend/freewinxray/isotope-layout/isotope.pkgd.min.js"></script>
    <script src="/assets/website/js/frontend/freewinxray/php-email-form/validate.js"></script>
    <script src="/assets/website/js/frontend/freewinxray/purecounter/purecounter.js"></script>
    <script src="/assets/website/js/frontend/freewinxray/swiper/swiper-bundle.min.js"></script>
    <script src="/assets/website/js/frontend/freewinxray/waypoints/noframework.waypoints.js"></script>
    <!-- Template Main JS File -->
    <script src="/assets/website/js/frontend/freewinxray/main.js"></script>
    <script src="https://www.freeclashnode.com/assets/js/frontend/invite-url.js"></script><script src="/assets/website/js/frontend/G.js"></script>
</body>

</html>